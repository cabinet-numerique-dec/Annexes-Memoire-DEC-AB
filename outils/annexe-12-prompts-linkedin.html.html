<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Annexe 12 — Générateur de Contenu LinkedIn IA | Cabinet 100% Numérique</title>
  <style>
    :root {
      --primary: #1e3a5f;
      --primary-light: #2d5a8a;
      --secondary: #0d9488;
      --secondary-light: #14b8a6;
      --accent: #f59e0b;
      --danger: #dc2626;
      --success: #059669;
      --warning: #d97706;
      --info: #2563eb;
      --linkedin: #0077b5;
      --linkedin-dark: #004471;
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-500: #6b7280;
      --gray-600: #4b5563;
      --gray-700: #374151;
      --gray-800: #1f2937;
      --radius: 12px;
      --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(135deg, var(--gray-100) 0%, #e0e7ef 100%);
      color: var(--gray-700);
      line-height: 1.6;
      min-height: 100vh;
    }
    .container { max-width: 1400px; margin: 0 auto; padding: 24px; }

    /* ── Header ── */
    .header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      color: white; border-radius: var(--radius);
      padding: 32px; margin-bottom: 24px;
      position: relative; overflow: hidden;
    }
    .header::before {
      content: ""; position: absolute; top: -50%; right: -10%;
      width: 300px; height: 300px;
      background: rgba(255,255,255,0.05); border-radius: 50%;
    }
    .header h1 { font-size: 22px; font-weight: 700; margin-bottom: 8px; position: relative; }
    .header p { opacity: 0.9; font-size: 14px; max-width: 900px; position: relative; }
    .header-meta { display: flex; gap: 12px; margin-top: 16px; flex-wrap: wrap; }
    .badge {
      display: inline-flex; align-items: center; gap: 6px;
      background: rgba(255,255,255,0.15);
      padding: 6px 14px; border-radius: 20px;
      font-size: 12px; font-weight: 600;
    }
    .badge-accent { background: var(--secondary); color: white; }
    .badge-linkedin { background: var(--linkedin); color: white; }

    /* ── Buttons ── */
    .action-bar { display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 24px; }
    .btn {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 12px 24px; border: none; border-radius: 8px;
      font-size: 14px; font-weight: 600; cursor: pointer;
      transition: all 0.2s; text-decoration: none;
    }
    .btn-primary { background: var(--primary); color: white; }
    .btn-primary:hover { background: var(--primary-light); transform: translateY(-2px); box-shadow: var(--shadow); }
    .btn-secondary { background: var(--gray-200); color: var(--gray-700); }
    .btn-secondary:hover { background: var(--gray-300); transform: translateY(-2px); }
    .btn-success { background: var(--success); color: white; }
    .btn-success:hover { background: #047857; transform: translateY(-2px); }
    .btn-linkedin { background: var(--linkedin); color: white; }
    .btn-linkedin:hover { background: var(--linkedin-dark); transform: translateY(-2px); }
    .btn-warning { background: var(--accent); color: white; }
    .btn-warning:hover { background: var(--warning); }
    .btn-danger { background: var(--danger); color: white; }
    .btn-danger:hover { background: #b91c1c; }
    .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
    .btn-outline:hover { background: var(--primary); color: white; }
    .btn-sm { padding: 6px 14px; font-size: 12px; }

    /* ── Tabs ── */
    .tabs {
      display: flex; gap: 4px; background: white; padding: 8px;
      border-radius: var(--radius); box-shadow: var(--shadow);
      margin-bottom: 24px; flex-wrap: wrap;
    }
    .tab {
      padding: 10px 16px; border: none; background: transparent;
      font-size: 13px; font-weight: 600; color: var(--gray-600);
      border-radius: 8px; cursor: pointer; transition: all 0.2s;
      white-space: nowrap;
    }
    .tab:hover { background: var(--gray-100); }
    .tab.active { background: var(--primary); color: white; }

    /* ── Panels ── */
    .panel { display: none; animation: fadeIn 0.3s ease; }
    .panel.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* ── Cards ── */
    .card {
      background: white; border-radius: var(--radius);
      padding: 24px; box-shadow: var(--shadow); margin-bottom: 20px;
    }
    .card-header {
      display: flex; align-items: center; gap: 12px;
      margin-bottom: 16px; padding-bottom: 16px;
      border-bottom: 1px solid var(--gray-200);
    }
    .card-icon {
      width: 48px; height: 48px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      border-radius: 10px; display: flex; align-items: center; justify-content: center;
      font-size: 22px; color: white; flex-shrink: 0;
    }
    .card-icon.secondary { background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-light) 100%); }
    .card-icon.accent { background: linear-gradient(135deg, var(--accent) 0%, #fbbf24 100%); }
    .card-icon.danger { background: linear-gradient(135deg, var(--danger) 0%, #ef4444 100%); }
    .card-icon.success { background: linear-gradient(135deg, var(--success) 0%, #34d399 100%); }
    .card-icon.linkedin { background: linear-gradient(135deg, var(--linkedin-dark) 0%, var(--linkedin) 100%); }
    .card-icon.info { background: linear-gradient(135deg, var(--info) 0%, #60a5fa 100%); }
    .card h3 { font-size: 18px; font-weight: 700; color: var(--gray-800); }
    .card .subtitle { color: var(--gray-500); font-size: 13px; margin-top: 2px; }
    .card-actions { margin-left: auto; display: flex; gap: 8px; flex-shrink: 0; }

    /* ── Forms ── */
    .form-group { margin-bottom: 20px; }
    .form-group label {
      display: block; font-size: 12px; font-weight: 600;
      color: var(--gray-600); margin-bottom: 6px; text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%; padding: 12px 16px;
      border: 2px solid var(--gray-200); border-radius: 8px;
      font-size: 14px; font-family: inherit;
      transition: all 0.2s; background: white;
    }
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none; border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(30, 58, 95, 0.1);
    }
    .form-group textarea { min-height: 100px; resize: vertical; }
    .form-hint { font-size: 11px; color: var(--gray-500); margin-top: 6px; }
    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    /* ── Char counter ── */
    .char-counter {
      font-size: 11px; color: var(--gray-500); text-align: right; margin-top: 4px;
    }
    .char-counter.warning { color: var(--warning); font-weight: 600; }
    .char-counter.danger { color: var(--danger); font-weight: 700; }

    /* ── Stat Cards ── */
    .grid-4 { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 20px; }
    .stat-card {
      background: white; border-radius: var(--radius); padding: 20px;
      box-shadow: var(--shadow); text-align: center;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .stat-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); }
    .stat-value {
      font-size: 32px; font-weight: 800;
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .stat-label { font-size: 13px; color: var(--gray-600); margin-top: 4px; font-weight: 500; }
    .stat-trend { font-size: 11px; margin-top: 8px; padding: 4px 10px; border-radius: 20px; display: inline-block; }
    .stat-trend.up { background: #d1fae5; color: var(--success); }
    .stat-trend.neutral { background: var(--gray-100); color: var(--gray-600); }

    /* ── Post Type Grid ── */
    .post-types-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 12px; margin-top: 8px;
    }
    .post-type-card {
      background: var(--gray-50); border: 2px solid var(--gray-200);
      border-radius: 10px; padding: 16px; cursor: pointer;
      transition: all 0.2s; text-align: center;
    }
    .post-type-card:hover {
      border-color: var(--primary); transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
    }
    .post-type-card.selected {
      border-color: var(--primary); background: rgba(30, 58, 95, 0.05);
    }
    .post-type-icon { font-size: 1.8rem; margin-bottom: 8px; }
    .post-type-title { font-weight: 700; color: var(--gray-800); font-size: 13px; margin-bottom: 4px; }
    .post-type-desc { font-size: 11px; color: var(--gray-500); }

    /* ── Themes ── */
    .themes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 10px; margin-top: 8px;
    }
    .theme-item {
      display: flex; align-items: center; gap: 10px;
      padding: 10px 14px; background: var(--gray-50);
      border-radius: 8px; cursor: pointer; transition: all 0.2s;
      border: 2px solid transparent; font-size: 13px;
    }
    .theme-item:hover { background: #edf2f7; }
    .theme-item.selected { background: rgba(30, 58, 95, 0.05); border-color: var(--primary); }
    .theme-item input[type="radio"] { width: 16px; height: 16px; accent-color: var(--primary); }
    .theme-label { font-weight: 500; color: var(--gray-700); }

    /* ── Prompt Output ── */
    .prompt-output {
      background: var(--gray-800); color: #e2e8f0;
      border-radius: 10px; padding: 24px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 13px; line-height: 1.7;
      white-space: pre-wrap; word-wrap: break-word;
      max-height: 500px; overflow-y: auto;
      position: relative;
    }
    .prompt-output::before {
      content: 'PROMPT GÉNÉRÉ';
      position: absolute; top: 8px; right: 12px;
      font-size: 10px; color: var(--secondary);
      font-weight: 700; letter-spacing: 1px;
    }

    /* ── LinkedIn Preview ── */
    .linkedin-preview {
      background: #fff; border: 1px solid #e0e0e0;
      border-radius: 8px; max-width: 555px;
      margin: 0 auto;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    .linkedin-preview-header {
      padding: 12px 16px; display: flex;
      align-items: flex-start; gap: 12px;
    }
    .linkedin-avatar {
      width: 48px; height: 48px;
      background: linear-gradient(135deg, var(--primary), var(--primary-light));
      border-radius: 50%; display: flex;
      align-items: center; justify-content: center;
      color: #fff; font-weight: 700; font-size: 1.2rem; flex-shrink: 0;
    }
    .linkedin-user-info { flex: 1; }
    .linkedin-user-name { font-weight: 600; color: #000; font-size: 0.95rem; }
    .linkedin-user-title { color: #666; font-size: 0.8rem; line-height: 1.3; }
    .linkedin-post-time { color: #666; font-size: 0.75rem; display: flex; align-items: center; gap: 4px; }
    .linkedin-preview-content {
      padding: 0 16px 12px; font-size: 0.9rem;
      color: #000; line-height: 1.5; white-space: pre-wrap;
    }
    .linkedin-preview-engagement {
      padding: 8px 16px; border-top: 1px solid #e0e0e0;
      display: flex; justify-content: space-between;
      color: #666; font-size: 0.8rem;
    }
    .linkedin-reactions { display: flex; align-items: center; gap: 4px; }
    .linkedin-preview-actions {
      padding: 4px 16px 12px; border-top: 1px solid #e0e0e0;
      display: flex; justify-content: space-around;
    }
    .linkedin-action {
      display: flex; align-items: center; gap: 6px;
      padding: 12px 8px; color: #666; font-size: 0.85rem;
      font-weight: 600; cursor: pointer; border-radius: 4px;
      transition: background 0.2s;
    }
    .linkedin-action:hover { background: #f3f6f8; color: #000; }

    /* ── Templates ── */
    .templates-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
    }
    .template-card {
      background: var(--gray-50); border: 2px solid var(--gray-200);
      border-radius: var(--radius); padding: 20px;
      cursor: pointer; transition: all 0.2s;
    }
    .template-card:hover {
      border-color: var(--primary); transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
    }
    .template-icon { font-size: 2rem; margin-bottom: 12px; }
    .template-title { font-weight: 700; color: var(--primary); margin-bottom: 8px; font-size: 14px; }
    .template-desc { font-size: 12px; color: var(--gray-500); line-height: 1.5; }

    /* ── Calendar ── */
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
    }
    .calendar-day-header {
      text-align: center; font-weight: 700;
      color: var(--gray-500); font-size: 11px; padding: 8px;
    }
    .calendar-day {
      background: var(--gray-50); border-radius: 8px;
      padding: 10px 6px; text-align: center;
      min-height: 70px; border: 2px solid transparent;
      cursor: pointer; transition: all 0.2s;
    }
    .calendar-day:hover { background: #edf2f7; }
    .calendar-day.has-post { background: rgba(30, 58, 95, 0.05); border-color: var(--primary); }
    .calendar-day.today { background: #ecfdf5; border-color: var(--secondary); }
    .calendar-day-number { font-weight: 700; color: var(--gray-700); margin-bottom: 4px; font-size: 13px; }
    .calendar-day-indicator {
      width: 8px; height: 8px; background: var(--primary);
      border-radius: 50%; margin: 4px auto;
    }

    /* ── Insight Boxes ── */
    .insight-box {
      background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
      border-left: 4px solid var(--success);
      padding: 16px 20px; border-radius: 0 8px 8px 0; margin: 16px 0;
    }
    .insight-box.warning { background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%); border-left-color: var(--warning); }
    .insight-box.info { background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border-left-color: var(--info); }
    .insight-box.danger { background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%); border-left-color: var(--danger); }
    .insight-box strong { color: var(--gray-800); }

    /* ── Tips Grid ── */
    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
    }
    .tip-card {
      background: var(--gray-50); border-radius: 10px;
      padding: 20px; border-left: 4px solid var(--primary);
    }
    .tip-card h4 { color: var(--primary); margin-bottom: 8px; font-size: 14px; }
    .tip-card p { color: var(--gray-500); font-size: 12px; line-height: 1.5; }

    /* ── History Table ── */
    .history-table {
      width: 100%; border-collapse: collapse; margin-top: 16px;
    }
    .history-table th, .history-table td {
      padding: 12px 14px; text-align: left;
      border-bottom: 1px solid var(--gray-200);
      font-size: 13px;
    }
    .history-table th {
      background: var(--gray-50); font-weight: 700;
      color: var(--primary); font-size: 11px;
      text-transform: uppercase; letter-spacing: 0.5px;
    }
    .history-table tr:hover { background: var(--gray-50); }
    .status-badge {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 4px 12px; border-radius: 20px;
      font-size: 11px; font-weight: 600;
    }
    .status-draft { background: #fef3cd; color: #856404; }
    .status-scheduled { background: #cce5ff; color: #004085; }
    .status-published { background: #d4edda; color: #155724; }

    /* ── Guide Tables ── */
    .guide-table {
      width: 100%; border-collapse: collapse; margin: 16px 0;
    }
    .guide-table thead tr {
      background: var(--primary); color: white;
    }
    .guide-table th {
      padding: 10px 14px; text-align: left; font-size: 12px; font-weight: 600;
    }
    .guide-table td {
      padding: 10px 14px; border-bottom: 1px solid var(--gray-200); font-size: 13px;
    }
    .guide-table tbody tr:nth-child(even) { background: var(--gray-50); }
    .guide-table tbody tr:hover { background: rgba(30, 58, 95, 0.04); }

    /* ── Deontologie Grid ── */
    .deonto-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
    }

    /* ── Modal ── */
    .modal-overlay {
      position: fixed; inset: 0; background: rgba(15,23,42,0.6);
      display: none; align-items: center; justify-content: center;
      z-index: 9998; padding: 20px;
    }
    .modal-overlay.show { display: flex; }
    .modal {
      background: white; border-radius: var(--radius);
      max-width: 600px; width: 100%; max-height: 80vh;
      box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); overflow: hidden;
    }
    .modal-header {
      background: var(--primary); color: white;
      padding: 16px 20px; display: flex;
      justify-content: space-between; align-items: center;
    }
    .modal-title { font-weight: 700; font-size: 16px; }
    .modal-close {
      background: rgba(255,255,255,0.2); border: none; color: white;
      padding: 8px 14px; border-radius: 6px; cursor: pointer; font-weight: 600;
    }
    .modal-close:hover { background: rgba(255,255,255,0.3); }
    .modal-body { padding: 20px; overflow-y: auto; max-height: 60vh; }
    .modal-footer {
      padding: 16px 20px; border-top: 1px solid var(--gray-200);
      display: flex; justify-content: flex-end; gap: 12px;
    }

    /* ── Toast ── */
    .toast {
      position: fixed; bottom: 24px; right: 24px;
      background: var(--gray-800); color: white;
      padding: 14px 20px; border-radius: 10px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      transform: translateY(100px); opacity: 0;
      transition: all 0.3s ease; z-index: 9999;
      font-size: 14px; font-weight: 500;
    }
    .toast.show { transform: translateY(0); opacity: 1; }

    /* ── Source footnotes ── */
    .source-note {
      font-size: 11px; color: var(--gray-500); font-style: italic;
      margin-top: 12px; padding-top: 12px;
      border-top: 1px solid var(--gray-200);
    }
    .source-note a { color: var(--info); text-decoration: none; }
    .source-note a:hover { text-decoration: underline; }

    /* ── Print ── */
    @media print {
      body { background: white; }
      .container { padding: 0; max-width: none; }
      .tabs, .action-bar, .toast, .modal-overlay { display: none !important; }
      .panel { display: block !important; page-break-inside: avoid; margin-bottom: 30px; }
      .card { box-shadow: none; border: 1px solid var(--gray-200); }
    }

    /* ── Responsive ── */
    @media (max-width: 768px) {
      .header { padding: 20px; }
      .header h1 { font-size: 18px; }
      .container { padding: 16px; }
      .form-row { grid-template-columns: 1fr; }
      .grid-4 { grid-template-columns: 1fr 1fr; }
      .calendar-grid { font-size: 11px; }
    }
  </style>
</head>
<body>

<div class="container">

  <!-- HEADER -->
  <div class="header">
    <h1>Annexe 12 — Générateur de consignes pour publications LinkedIn</h1>
    <p>Outil de production de prompts IA structurés pour la création de contenu LinkedIn dans le cadre de la prospection client d'un cabinet d'expertise comptable 100 % numérique.</p>
    <div class="header-meta">
      <span class="badge">Outil opérationnel</span>
      <span class="badge badge-linkedin">LinkedIn B2B</span>
      <span class="badge badge-accent">Conformité déontologie OEC</span>
      <span class="badge">8 modèles prédéfinis</span>
    </div>

  </div>

  <!-- ACTION BAR -->
  <div class="action-bar">
    <button class="btn btn-primary" onclick="generatePrompt()">Générer le Prompt IA</button>
    <button class="btn btn-secondary" onclick="exportData()">Export JSON</button>
    <button class="btn btn-secondary" onclick="importData()">Import JSON</button>
    <button class="btn btn-warning" onclick="loadCasPratique()">Cas pratique Cabinet X</button>
    <button class="btn btn-danger" onclick="resetData()">Réinitialiser</button>
  </div>

  <input type="file" id="importFile" accept=".json" style="display:none" onchange="handleImport(event)">

  <!-- TABS -->
  <div class="tabs">
    <button class="tab active" onclick="showPanel('generator')">Générateur</button>
    <button class="tab" onclick="showPanel('templates')">Modèles</button>
    <button class="tab" onclick="showPanel('calendar')">Calendrier</button>
    <button class="tab" onclick="showPanel('history')">Historique</button>
    <button class="tab" onclick="showPanel('conformite')">Conformité</button>
  </div>

  <!-- PANEL: GÉNÉRATEUR -->
  <div id="generator" class="panel active">

    <div class="insight-box info">
      <strong>Mode opératoire</strong><br>
      Cet outil génère des prompts optimisés pour l'IA (ChatGPT, Claude, etc.) afin de produire du contenu LinkedIn engageant pour la prospection client. Le processus se déroule en quatre étapes : (1) configuration de l'auteur et de la cible, (2) sélection du type de post et de la thématique, (3) génération du prompt structuré, (4) relecture selon la checklist intégrée avant toute publication. Aucun contenu généré par l'IA ne doit être publié sans relecture humaine préalable.
    </div>

    <!-- Configuration auteur -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon linkedin">&#x1f464;</div>
        <div>
          <h3>Configuration de l'auteur</h3>
          <div class="subtitle">Informations du profil LinkedIn — L'algorithme 360Brew analyse la cohérence entre votre profil et vos publications</div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="authorName">Nom de l'auteur</label>
          <input type="text" id="authorName" placeholder="Ex: Jean Dupont">
        </div>
        <div class="form-group">
          <label for="authorTitle">Titre / Fonction (headline LinkedIn)</label>
          <input type="text" id="authorTitle" placeholder="Ex: Expert-comptable | Cabinet 100% digital | Startups & PME">
          <p class="form-hint">360Brew utilise votre headline pour déterminer à qui montrer vos posts. Soyez précis sur votre expertise et votre cible.</p>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="cabinetName">Nom du cabinet</label>
          <input type="text" id="cabinetName" placeholder="Ex: Cabinet Expertise Digitale">
        </div>
        <div class="form-group">
          <label for="targetAudience">Cible principale</label>
          <select id="targetAudience">
            <option value="startup" selected>Fondateurs de startups</option>
            <option value="tpe">Dirigeants de TPE</option>
            <option value="pme">Dirigeants de PME</option>
            <option value="freelance">Freelances / Indépendants</option>
            <option value="e-commerce">E-commerçants</option>
            <option value="professions-liberales">Professions libérales</option>
            <option value="mixte">Audience mixte B2B</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Type de post -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon accent">&#x1f4cc;</div>
        <div>
          <h3>Type de post</h3>
          <div class="subtitle">Sélectionnez le format — En 2026, les carrousels courts (8-10 slides) et les posts texte longs performent le mieux en B2B</div>
        </div>
      </div>
      <div class="post-types-grid">
        <div class="post-type-card selected" data-type="expertise" onclick="selectPostType(this)">
          <div class="post-type-icon">&#x1f393;</div>
          <div class="post-type-title">Expertise</div>
          <div class="post-type-desc">Partage de connaissances techniques</div>
        </div>
        <div class="post-type-card" data-type="actualite" onclick="selectPostType(this)">
          <div class="post-type-icon">&#x1f4f0;</div>
          <div class="post-type-title">Actualite</div>
          <div class="post-type-desc">Réaction à une news ou réforme</div>
        </div>
        <div class="post-type-card" data-type="conseil" onclick="selectPostType(this)">
          <div class="post-type-icon">&#x1f4a1;</div>
          <div class="post-type-title">Conseil pratique</div>
          <div class="post-type-desc">Tips actionnables immédiatement</div>
        </div>
        <div class="post-type-card" data-type="storytelling" onclick="selectPostType(this)">
          <div class="post-type-icon">&#x1f4d6;</div>
          <div class="post-type-title">Storytelling</div>
          <div class="post-type-desc">Anecdote ou cas client anonymisé</div>
        </div>
        <div class="post-type-card" data-type="engagement" onclick="selectPostType(this)">
          <div class="post-type-icon">&#x1f4ac;</div>
          <div class="post-type-title">Engagement</div>
          <div class="post-type-desc">Question ou débat</div>
        </div>
        <div class="post-type-card" data-type="carrousel" onclick="selectPostType(this)">
          <div class="post-type-icon">&#x1f4ca;</div>
          <div class="post-type-title">Carrousel</div>
          <div class="post-type-desc">8-10 slides max (completion rate)</div>
        </div>
      </div>
    </div>

    <!-- Thématique & Sujet -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon secondary">&#x1f3f7;</div>
        <div>
          <h3>Thématique et contenu</h3>
          <div class="subtitle">Définissez le sujet — Restez dans votre « topic fingerprint » pour maximiser la distribution</div>
        </div>
      </div>

      <div class="form-group">
        <label>Thématique principale</label>
        <div class="themes-grid">
          <label class="theme-item selected">
            <input type="radio" name="theme" value="facture-electronique" checked>
            <span class="theme-label">Facturation électronique</span>
          </label>
          <label class="theme-item">
            <input type="radio" name="theme" value="fiscalite">
            <span class="theme-label">Fiscalité / Impôts</span>
          </label>
          <label class="theme-item">
            <input type="radio" name="theme" value="creation-entreprise">
            <span class="theme-label">Création d'entreprise</span>
          </label>
          <label class="theme-item">
            <input type="radio" name="theme" value="tresorerie">
            <span class="theme-label">Gestion de trésorerie</span>
          </label>
          <label class="theme-item">
            <input type="radio" name="theme" value="social">
            <span class="theme-label">Social / Paie</span>
          </label>
          <label class="theme-item">
            <input type="radio" name="theme" value="outils-digitaux">
            <span class="theme-label">Outils digitaux</span>
          </label>
          <label class="theme-item">
            <input type="radio" name="theme" value="pilotage">
            <span class="theme-label">Pilotage / KPIs</span>
          </label>
          <label class="theme-item">
            <input type="radio" name="theme" value="levee-fonds">
            <span class="theme-label">Levée de fonds</span>
          </label>
          <label class="theme-item">
            <input type="radio" name="theme" value="juridique">
            <span class="theme-label">Juridique / Sociétés</span>
          </label>
          <label class="theme-item">
            <input type="radio" name="theme" value="ia-comptabilite">
            <span class="theme-label">IA & Comptabilité</span>
          </label>
        </div>
      </div>

      <div class="form-group">
        <label for="specificTopic">Sujet spécifique à traiter</label>
        <textarea id="specificTopic" placeholder="Ex: Les 3 erreurs fatales des startups avec leur TVA intracommunautaire..."></textarea>
        <p class="form-hint">Décrivez précisément le sujet ou l'angle que vous souhaitez aborder</p>
      </div>

      <div class="form-group">
        <label for="factsProvided">Données factuelles fournies (optionnel, recommandé)</label>
        <textarea id="factsProvided" placeholder="Collez ici UNIQUEMENT des informations vérifiées : dates officielles, seuils, statistiques sourcées, références, liens.&#10;Ex : 'Echeance : [DATE] (source : [LIEN])' ; 'Seuil : [MONTANT] (source : [LIEN])'."></textarea>
        <p class="form-hint"><strong>Règle anti-hallucination :</strong> si aucune donnée n'est fournie, le prompt impose à l'IA de rester sans chiffres, sans dates, sans seuils et sans références juridiques précises.</p>
      </div>
    </div>

    <!-- Ton & Format -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon info">&#x270d;</div>
        <div>
          <h3>Ton et format</h3>
          <div class="subtitle">Personnalisez le style — Le contenu « saveable » (frameworks, checklists, guides) est le plus distribué par l'algorithme</div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="tone">Ton du post</label>
          <select id="tone">
            <option value="professionnel">Professionnel expert</option>
            <option value="accessible" selected>Accessible et pédagogue</option>
            <option value="percutant">Percutant et direct</option>
            <option value="storytelling">Narratif / Storytelling</option>
            <option value="humoristique">Légèrement humoristique</option>
          </select>
        </div>
        <div class="form-group">
          <label for="postLength">Longueur souhaitée</label>
          <select id="postLength">
            <option value="court">Court (< 500 caractères)</option>
            <option value="moyen" selected>Moyen (800-1 200 caractères)</option>
            <option value="long">Long (1 500-2 000 caractères)</option>
            <option value="tres-long">Très long (max 3 000 caractères)</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <label for="cta">Call-to-action souhaité</label>
        <select id="cta">
          <option value="commentaire" selected>Inciter au commentaire</option>
          <option value="rdv">Proposer un RDV / Audit gratuit</option>
          <option value="dm">Inviter à envoyer un DM</option>
          <option value="lien">Rediriger vers un lien</option>
          <option value="save">Inciter à sauvegarder le post</option>
          <option value="aucun">Pas de CTA explicite</option>
        </select>
        <p class="form-hint">En 2026, les « saves » (signets) sont le signal d'engagement le plus valorisé par l'algorithme. Le CTA « sauvegarder » est stratégiquement pertinent.</p>
      </div>
    </div>

    <!-- Prompt Output -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon success">&#x1f916;</div>
        <div>
          <h3>Prompt Généré</h3>
          <div class="subtitle">Copiez ce prompt et collez-le dans ChatGPT, Claude ou tout autre IA — puis relisez le résultat selon la checklist</div>
        </div>
        <div class="card-actions">
          <button class="btn btn-success btn-sm" onclick="copyPrompt()">Copier</button>
        </div>
      </div>
      <div id="promptOutput" class="prompt-output">Cliquez sur « Générer le Prompt IA » pour créer votre prompt personnalisé…</div>
      <div id="promptCharCount" class="char-counter"></div>
    </div>

    <!-- LinkedIn Preview -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon linkedin">&#x1f441;</div>
        <div>
          <h3>Aperçu LinkedIn</h3>
          <div class="subtitle">Prévisualisation de la structure du post sur le fil d'actualité — Collez ici le résultat obtenu de l'IA</div>
        </div>
      </div>
      <div class="form-group">
        <label for="pasteResult">Collez le contenu généré par l'IA pour visualiser le rendu</label>
        <textarea id="pasteResult" rows="6" placeholder="Collez ici le texte généré par l'IA après relecture…"></textarea>
        <div id="pasteCharCount" class="char-counter"></div>
      </div>
      <div id="linkedinPreview" class="linkedin-preview">
        <div class="linkedin-preview-header">
          <div class="linkedin-avatar">EC</div>
          <div class="linkedin-user-info">
            <div class="linkedin-user-name">Expert-Comptable Digital</div>
            <div class="linkedin-user-title">Expert-comptable | Cabinet 100% digital | Startups & PME</div>
            <div class="linkedin-post-time">&#x1f310; • Maintenant</div>
          </div>
        </div>
        <div class="linkedin-preview-content" id="previewContent">Votre post LinkedIn apparaîtra ici une fois le contenu collé dans le champ ci-dessus…</div>
        <div id="voirPlusOverlay" style="display:none; padding:0 16px 8px; font-size:0.85rem;">
          <span style="color:#666;">…</span> <a href="#" onclick="event.preventDefault();document.getElementById('previewContent').style.maxHeight='none';this.parentElement.style.display='none';document.getElementById('voirMoinsOverlay').style.display='block';" style="color:#0a66c2; font-weight:600; text-decoration:none; cursor:pointer;">voir plus</a>
        </div>
        <div id="voirMoinsOverlay" style="display:none; padding:0 16px 8px; text-align:right;">
          <a href="#" onclick="event.preventDefault();document.getElementById('previewContent').style.maxHeight='130px';document.getElementById('voirPlusOverlay').style.display='block';this.parentElement.style.display='none';" style="color:#0a66c2; font-size:0.8rem; text-decoration:none; cursor:pointer;">voir moins</a>
        </div>
        <div class="linkedin-preview-engagement">
          <div class="linkedin-reactions">&#x1f44d; &#x2764; &#x1f4a1; <span style="margin-left:4px">— reactions</span></div>
          <div>— commentaires • — partages</div>
        </div>
        <div class="linkedin-preview-actions">
          <div class="linkedin-action">&#x1f44d; J'aime</div>
          <div class="linkedin-action">&#x1f4ac; Commenter</div>
          <div class="linkedin-action">&#x1f504; Partager</div>
          <div class="linkedin-action">&#x1f516; Enregistrer</div>
        </div>
      </div>
    </div>

    <!-- Retour d'utilisation -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon secondary">&#x1f4c8;</div>
        <div>
          <h3>Retour d'utilisation</h3>
          <div class="subtitle">Résultats observés lors du déploiement de l'outil — Cas du Cabinet X</div>
        </div>
      </div>
      <div class="insight-box warning">
        <strong>Données de déploiement (à compléter avec vos résultats réels)</strong><br><br>
        L'outil a été conçu et testé dans le cadre de la préparation du cas pratique du memoire. Le calendrier éditorial du Cabinet X prévoit une cadence de 2 à 3 posts par semaine sur 8 semaines, ciblés sur la thématique « facturation électronique » et « pilotage TPE/startups ». Les resultats de deploiement (impressions, taux d'engagement, commentaires, leads générés) seront mesurés sur les premiers mois d'activité du cabinet et viendront alimenter les indicateurs de pilotage définis en Partie II, §1.2 (KPIs d'acquisition).<br><br>
        <strong>Protocole de mesure prévu :</strong> suivi hebdomadaire via LinkedIn Analytics — impressions, taux d'engagement, saves, commentaires, messages reçus — avec comparaison entre types de posts (expertise, conseil, storytelling) et ajustement de la ligne éditoriale à 8 semaines.
      </div>
    </div>
  </div>

  <!-- PANEL: MODÈLES -->
  <div id="templates" class="panel">
    <div class="card">
      <div class="card-header">
        <div class="card-icon accent">&#x1f4cb;</div>
        <div>
          <h3>Modèles de posts LinkedIn prédéfinis</h3>
          <div class="subtitle">Cliquez sur un modèle pour pré-remplir le générateur — Chaque modèle correspond à un objectif de prospection différent</div>
        </div>
      </div>
      <div class="templates-grid">
        <div class="template-card" onclick="loadTemplate('accroche-choc')">
          <div class="template-icon">&#x26a1;</div>
          <div class="template-title">Accroche choc</div>
          <div class="template-desc">Post commençant par une statistique sourcée (si fournie) ou une question contre-intuitive pour capter l'attention. Optimisé pour les saves.</div>
        </div>
        <div class="template-card" onclick="loadTemplate('erreur-courante')">
          <div class="template-icon">&#x274c;</div>
          <div class="template-title">Les X erreurs</div>
          <div class="template-desc">Format listicle des erreurs fréquentes commises par les entrepreneurs, avec solutions. Fort potentiel de sauvegarde.</div>
        </div>
        <div class="template-card" onclick="loadTemplate('cas-client')">
          <div class="template-icon">&#x1f3c6;</div>
          <div class="template-title">Success story</div>
          <div class="template-desc">Storytelling autour d'un cas strictement anonymise — problème, solution, enseignements. Respecte art. 12 code déontologie.</div>
        </div>
        <div class="template-card" onclick="loadTemplate('actualite')">
          <div class="template-icon">&#x1f4f0;</div>
          <div class="template-title">Décryptage actu</div>
          <div class="template-desc">Analyse d'une actualité fiscale, sociale ou réglementaire avec impact concret. Positionnement d'autorité thématique.</div>
        </div>
        <div class="template-card" onclick="loadTemplate('checklist')">
          <div class="template-icon">&#x2705;</div>
          <div class="template-title">Checklist pratique</div>
          <div class="template-desc">Liste actionnable de points à vérifier. Format « saveable » — incite à l'enregistrement pour référence ultérieure.</div>
        </div>
        <div class="template-card" onclick="loadTemplate('mythe-realite')">
          <div class="template-icon">&#x1f50d;</div>
          <div class="template-title">Mythe vs Réalité</div>
          <div class="template-desc">Démystification d'idées reçues sur la fiscalité, la comptabilité ou la création d'entreprise.</div>
        </div>
        <div class="template-card" onclick="loadTemplate('question')">
          <div class="template-icon">&#x2753;</div>
          <div class="template-title">Question ouverte</div>
          <div class="template-desc">Post engageant avec une question qui génère des commentaires authentiques. Évite l'engagement bait détecté par l'algorithme.</div>
        </div>
        <div class="template-card" onclick="loadTemplate('carrousel-guide')">
          <div class="template-icon">&#x1f4ca;</div>
          <div class="template-title">Carrousel éducatif</div>
          <div class="template-desc">Structure pour carrousel 8-10 slides max. L'algorithme pénalise les faibles taux de complétion.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- PANEL: CALENDRIER -->
  <div id="calendar" class="panel">
    <div class="grid-4" id="calendarStats">
      <div class="stat-card">
        <div class="stat-value" id="statPostsMonth">0</div>
        <div class="stat-label">Posts ce mois</div>
        <div class="stat-trend neutral">objectif 8-12</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="statPostsTotal">0</div>
        <div class="stat-label">Posts planifiés</div>
        <div class="stat-trend neutral">total</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="statPublished">0</div>
        <div class="stat-label">Posts publiés</div>
        <div class="stat-trend up">complétés</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">2-3/sem</div>
        <div class="stat-label">Cadence cible</div>
        <div class="stat-trend neutral">régularité > timing</div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-icon">&#x1f4c5;</div>
        <div>
          <h3 id="calendarTitle">—</h3>
          <div class="subtitle">La régularité de publication est plus importante que le jour ou l'heure (Forbes/Cook, 12 janvier 2026)</div>
        </div>
        <div class="card-actions">
          <button class="btn btn-outline btn-sm" onclick="prevMonth()">&#x25c0;</button>
          <button class="btn btn-outline btn-sm" onclick="nextMonth()">&#x25b6;</button>
          <button class="btn btn-linkedin btn-sm" onclick="openPostModal()">+ Nouveau Post</button>
        </div>
      </div>
      <div class="calendar-grid" id="calendarGrid"></div>
    </div>
  </div>

  <!-- PANEL: HISTORIQUE -->
  <div id="history" class="panel">
    <div class="card">
      <div class="card-header">
        <div class="card-icon">&#x1f4ca;</div>
        <div>
          <h3>Historique des prompts générés</h3>
          <div class="subtitle">Retrouvez et réutilisez vos prompts précédents — Traçabilité de la production de contenu</div>
        </div>
        <div class="card-actions">
          <button class="btn btn-outline btn-sm" onclick="clearHistory()">Vider</button>
        </div>
      </div>
      <table class="history-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Thème</th>
            <th>Cible</th>
            <th>Statut</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="historyTableBody">
          <tr><td colspan="6" style="text-align:center;color:var(--gray-500);font-style:italic;">Aucun historique</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- PANEL: CONFORMITÉ (remplace l'ancien "Guide") -->
  <div id="conformite" class="panel">

    <!-- Sécurisation du processus -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon danger">&#x2696;</div>
        <div>
          <h3>Sécurisation déontologique du processus de publication</h3>
          <div class="subtitle">Cadre de conformité intégré au prompt — Références normatives précises</div>
        </div>
      </div>

      <p style="margin-bottom:16px; line-height:1.8; color:var(--gray-700); font-size:14px;">
        Toute publication LinkedIn d'un expert-comptable inscrit au Tableau de l'Ordre est encadrée par le code de déontologie (décret n°2012-432). L'outil intègre ces contraintes directement dans le prompt généré et dans la checklist de relecture. La sécurisation repose sur une séquence courte mais systématique : relecture technique, contrôle déontologique (secret, anonymisation, prudence), vérification des sources, puis suppression de toute donnée spécifique non sourcée.
      </p>

      <div class="deonto-grid">
        <div>
          <div class="insight-box" style="margin-top:0;">
            <strong>Pratiques autorisées (art. 152-155)</strong><br><br>
            Partager son expertise technique de manière générale et pédagogique.<br>
            Vulgariser des concepts complexes pour une audience non spécialiste.<br>
            Présenter des cas strictement anonymisés (art. 12 — secret professionnel).<br>
            Réagir à l'actualité professionnelle avec prudence et reserve.<br>
            Promouvoir ses services de manière factuelle, loyale et décente.<br>
            Publier des témoignages clients avec accord écrit préalable.
          </div>
        </div>
        <div>
          <div class="insight-box danger" style="margin-top:0;">
            <strong>Pratiques à éviter</strong><br><br>
            Publicité comparative avec d'autres cabinets (art. 152).<br>
            Promesses de résultats garantis.<br>
            Divulgation d'informations confidentielles (art. 12).<br>
            Démarchage agressif en DM.<br>
            Conseils personnalisés publics (risque de responsabilité).<br>
            Critique de confrères (art. 162).<br>
            Publication de chiffres, dates ou seuils non vérifiés.
          </div>
        </div>
      </div>

      <div class="insight-box warning" style="margin-top:16px;">
        <strong>Checklist de relecture intégrée au prompt</strong><br><br>
        Chaque prompt généré par l'outil contient une section « Relecture interne (ne pas publier) » comportant 8 points de contrôle : (1) exactitude des faits, (2) absence d'invention (chiffres/dates/seuils), (3) respect du secret professionnel et anonymisation, (4) clarté et accessibilité, (5) cohérence ton/CTA, (6) lisibilité et aération, (7) conformité déontologique (art. 12, 145, 152-155), (8) orthographe et grammaire. Cette checklist transforme le contrôle en réflexe systématique.
      </div>

      <div class="source-note">
        Sources : Décret n°2012-432 du 30 mars 2012 — Code de déontologie des professionnels de l'expertise comptable. CNOEC — Recommandations sur la communication digitale. Art. 4 du règlement européen sur l'intelligence artificielle (AI Act) — obligation de maîtrise de l'IA (AI literacy) applicable depuis le 2 février 2025.
      </div>
    </div>


    <!-- RGPD -->
    <div class="card">
      <div class="card-header">
        <h3>Protection des données personnelles (RGPD)</h3>
      </div>
      <div class="card-body">
        <p>L'outil fonctionne intégralement en local (navigateur) : aucune donnée n'est transmise à un serveur externe. Les informations saisies (nom, cabinet, contenu) sont stockées via <code>localStorage</code> sur le poste de l'utilisateur uniquement.</p>
        <p style="margin-top:8px;">Toutefois, le contenu généré par l'IA (ChatGPT, Claude, etc.) transite par les serveurs du fournisseur choisi. L'expert-comptable doit donc :</p>
        <ul style="margin:8px 0 0 20px; line-height:1.8;">
          <li><strong>Ne jamais saisir de données personnelles clients</strong> dans le prompt (art. 12 code de déontologie + art. 5-6 RGPD)</li>
          <li><strong>Vérifier la politique de confidentialité</strong> du fournisseur d'IA utilisé (conservation, réutilisation pour entraînement)</li>
          <li><strong>Privilégier les options « sans historique »</strong> proposées par certains fournisseurs (ex : mode API, désactivation de l'entraînement)</li>
        </ul>
        <p class="source-note" style="margin-top:12px;">Références : Règlement (UE) 2016/679 (RGPD), art. 5 et 6 — CNIL, recommandations sur l'utilisation de l'IA générative en entreprise — Art. 12 du code de déontologie OEC (secret professionnel).</p>
      </div>
    </div>

    <!-- Evolution algorithmique -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon linkedin">&#x1f4f1;</div>
        <div>
          <h3>Évolution algorithmique LinkedIn — Point de vigilance</h3>
          <div class="subtitle">Actualisation des recommandations à février 2026</div>
        </div>
      </div>

      <p style="margin-bottom:16px; line-height:1.8; color:var(--gray-700); font-size:14px;">
        L'algorithme LinkedIn a connu une évolution majeure fin 2025 avec le déploiement de 360Brew, un modèle de classement personnalisé. Les recommandations de cet outil sont ajustées en conséquence. Elles constituent un cadre de départ à tester et ajuster selon les résultats observés sur votre propre audience.
      </p>

      <table class="guide-table">
        <thead>
          <tr>
            <th>Pratique</th>
            <th>Statut 2024</th>
            <th>Statut 2026</th>
            <th>Source</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><strong>Hashtags (3-5 par post)</strong></td><td>Recommandé</td><td>Obsolète — impact nul à négatif (jusqu'a -29%)</td><td>van der Blom, 8 mois, 2025</td></tr>
          <tr><td><strong>Timing de publication precis</strong></td><td>Mardi-jeudi matin</td><td>Pas de « golden hour » — la régularité prime</td><td>Forbes/Cook, 12 janvier 2026</td></tr>
          <tr><td><strong>Liens dans le corps du post</strong></td><td>À éviter (baisse de reach)</td><td>Pénalité significativement réduite</td><td>Forbes/Cook, 12 janvier 2026</td></tr>
          <tr><td><strong>Cohérence profil-contenu</strong></td><td>Peu mentionné</td><td>Critère central de distribution (360Brew)</td><td>Forbes/Cook, jan. 2026</td></tr>
          <tr><td><strong>Saves (signets)</strong></td><td>Signal secondaire</td><td>Signal d'engagement n°1</td><td>SayWhat, 300 000 posts</td></tr>
          <tr><td><strong>Carrousels</strong></td><td>Pas de limite</td><td>8-10 slides max (taux de complétion)</td><td>Forbes/Cook, 12 janvier 2026</td></tr>
          <tr><td><strong>Engagement bait</strong></td><td>Toléré</td><td>Détecté et pénalisé par l'algorithme</td><td>Hootsuite, mid-2025</td></tr>
        </tbody>
      </table>

      <div class="insight-box info" style="margin-top:16px;">
        <strong>Limite méthodologique</strong><br>
        Les données ci-dessus proviennent d'analyses de praticiens et de marketeurs (SayWhat, Trust Insights, van der Blom) et non de publications officielles de LinkedIn Engineering. Elles représentent l'état des connaissances observables à février 2026 et sont susceptibles d'évoluer. Le cabinet doit mesurer ses propres résultats (tests A/B sur 4 à 8 semaines) avant de figer sa stratégie éditoriale.
      </div>

      <div class="source-note">
        Sources : COOK Jodie, "The LinkedIn Algorithm Changed Again. Here's What's New For 2026", Forbes, 12 janvier 2026. DONNELLY Chris, The Creator Accelerator / SayWhat — analyse de 300 000 posts LinkedIn. VAN DER BLOM Richard, etude hashtag performance, 8 mois, 2025. LinkedIn Engineering Blog — Content Distribution (2024). Hootsuite, "How the LinkedIn algorithm works in 2025", mid-2025 edition.
      </div>
    </div>

    <!-- References -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon">&#x1f4da;</div>
        <div>
          <h3>References</h3>
          <div class="subtitle">Sources utilisées pour la conception de l'outil</div>
        </div>
      </div>
      <table class="guide-table">
        <thead>
          <tr>
            <th>Source</th>
            <th>Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><strong>Code de déontologie OEC</strong></td><td>Décret n°2012-432 du 30 mars 2012 — art. 12, 145, 152-155, 162</td></tr>
          <tr><td><strong>Règles de communication OEC</strong></td><td>CNOEC — Recommandations sur la communication digitale</td></tr>
          <tr><td><strong>AI Act</strong></td><td>Règlement (UE) 2024/1689 — art. 4, AI literacy, applicable 02/02/2025</td></tr>
          <tr><td><strong>LinkedIn 360Brew</strong></td><td>COOK Jodie, Forbes, 12 janvier 2026 ; DONNELLY Chris, SayWhat, 300 000 posts</td></tr>
          <tr><td><strong>Hashtag performance</strong></td><td>VAN DER BLOM Richard, etude 8 mois, 2025 — impact nul a -29%</td></tr>
          <tr><td><strong>LinkedIn Engineering</strong></td><td>Content Distribution Blog, 2024</td></tr>
          <tr><td><strong>France Num</strong></td><td>Guide IA generative pour les experts-comptables, 2025</td></tr>
          <tr><td><strong>Bonnes pratiques B2B</strong></td><td>LinkedIn Business Marketing Blog — B2B Marketing Insights 2026</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- FOOTER RETOUR MEMOIRE -->
  <div style="margin-top:32px; padding:20px 24px; background:var(--primary); color:white; border-radius:var(--radius); display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:12px;">
    <div>
      <strong style="font-size:13px;">Annexe 12 — Générateur de consignes pour publications LinkedIn</strong><br>
      <span style="font-size:11px; opacity:0.8;">Mémoire DEC — Entreprendre en tant qu\'expert-comptable dans un univers numérisé</span>
    </div>
    <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
      <span style="font-size:12px; background:rgba(255,255,255,0.15); padding:6px 14px; border-radius:20px;">→ Retour au corps du mémoire — Partie II, §1.1</span>
      <span style="font-size:11px; opacity:0.7;">Renvoi : Annexe 13 (questionnaire d\'entrée en relation)</span>
    </div>
  </div>

</div>

<!-- MODAL: Planifier Post -->
<div id="modal-post" class="modal-overlay">
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title">Planifier un Post</div>
      <button class="modal-close" onclick="closeModal('post')">Fermer</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="postDate">Date de publication</label>
        <input type="date" id="postDate">
      </div>
      <div class="form-group">
        <label for="postTime">Heure</label>
        <select id="postTime">
          <option value="08:00">08:00</option>
          <option value="12:00" selected>12:00</option>
          <option value="17:30">17:30</option>
        </select>
        <p class="form-hint">L'heure est indicative — la régularité de publication est plus importante que le créneau (360Brew).</p>
      </div>
      <div class="form-group">
        <label for="postThemeModal">Thème</label>
        <input type="text" id="postThemeModal" placeholder="Ex: Facturation électronique">
      </div>
      <div class="form-group">
        <label for="postNotes">Notes / Idées</label>
        <textarea id="postNotes" placeholder="Idées clés à développer…"></textarea>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" onclick="closeModal('post')">Annuler</button>
      <button class="btn btn-linkedin" onclick="savePost()">Planifier</button>
    </div>
  </div>
</div>

<div id="toast" class="toast"></div>

<script>
// =====================================================
// DATA STORE
// =====================================================
const STORAGE_KEY = 'annexe12_linkedin_v3';

let appData = {
  history: [],
  calendar: [],
  settings: { authorName: '', authorTitle: '', cabinetName: '' }
};

let currentMonth = 1;
let currentYear = 2026;

// =====================================================
// INITIALIZATION
// =====================================================
document.addEventListener('DOMContentLoaded', () => {
  loadData();
  initThemeSelection();
  renderCalendar();
  renderHistory();
  updateStats();
  initCharCounters();
});

// =====================================================
// CHAR COUNTERS
// =====================================================
function initCharCounters() {
  const pasteArea = document.getElementById('pasteResult');
  pasteArea.addEventListener('input', function() {
    const len = this.value.length;
    const counter = document.getElementById('pasteCharCount');
    counter.textContent = len + ' / 3 000 caractères';
    counter.className = 'char-counter' + (len > 2800 ? ' danger' : len > 2400 ? ' warning' : '');
    // Update preview
    const name = document.getElementById('authorName').value || 'Expert-Comptable';
    const title = document.getElementById('authorTitle').value || 'Expert-comptable | Cabinet digital';
    const initials = name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase() || 'EC';
    document.querySelector('.linkedin-avatar').textContent = initials;
    document.querySelector('.linkedin-user-name').textContent = name;
    document.querySelector('.linkedin-user-title').textContent = title;
    document.getElementById('previewContent').textContent = this.value || 'Votre post LinkedIn apparaîtra ici…';
    var pEl = document.getElementById('previewContent');
    var vpO = document.getElementById('voirPlusOverlay');
    var vmO = document.getElementById('voirMoinsOverlay');
    if (this.value && this.value.length > 210) {
      pEl.style.maxHeight = '130px'; pEl.style.overflow = 'hidden';
      vpO.style.display = 'block'; vmO.style.display = 'none';
    } else {
      pEl.style.maxHeight = 'none'; pEl.style.overflow = 'visible';
      vpO.style.display = 'none'; vmO.style.display = 'none';
    }
  });
}

// =====================================================
// PANEL NAVIGATION
// =====================================================
function showPanel(panelId) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.getElementById(panelId).classList.add('active');
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
}

// =====================================================
// POST TYPE SELECTION
// =====================================================
function selectPostType(element) {
  document.querySelectorAll('.post-type-card').forEach(c => c.classList.remove('selected'));
  element.classList.add('selected');
}

function getSelectedPostType() {
  const sel = document.querySelector('.post-type-card.selected');
  return sel ? sel.dataset.type : 'expertise';
}

// =====================================================
// THEME SELECTION
// =====================================================
function initThemeSelection() {
  document.querySelectorAll('.theme-item').forEach(item => {
    const radio = item.querySelector('input[type="radio"]');
    if (radio.checked) item.classList.add('selected');
    radio.addEventListener('change', () => {
      document.querySelectorAll('.theme-item').forEach(i => i.classList.remove('selected'));
      if (radio.checked) item.classList.add('selected');
    });
  });
}

// =====================================================
// PROMPT GENERATION
// =====================================================
function generatePrompt() {
  const authorName = document.getElementById('authorName').value || 'Expert-Comptable';
  const authorTitle = document.getElementById('authorTitle').value || 'Expert-comptable | Cabinet digital';
  const cabinetName = document.getElementById('cabinetName').value || 'Mon Cabinet';
  const targetAudience = document.getElementById('targetAudience').value;
  const postType = getSelectedPostType();
  const theme = document.querySelector('input[name="theme"]:checked')?.value || 'fiscalite';
  const specificTopic = document.getElementById('specificTopic').value;
  const factsProvided = document.getElementById('factsProvided').value;
  const tone = document.getElementById('tone').value;
  const postLength = document.getElementById('postLength').value;
  const cta = document.getElementById('cta').value;

  const postTypeLabels = {
    'expertise': "Post d'expertise technique",
    'actualite': "Réaction / Décryptage d'actualité",
    'conseil': 'Conseil pratique actionnable',
    'storytelling': 'Storytelling / Anecdote professionnelle (cas anonymisé)',
    'engagement': "Post d'engagement (question/débat)",
    'carrousel': 'Structure pour carrousel LinkedIn (8-10 slides max)'
  };
  const targetLabels = {
    'startup': 'Fondateurs et dirigeants de startups',
    'tpe': 'Dirigeants de TPE (0-10 salariés)',
    'pme': 'Dirigeants de PME (10-250 salariés)',
    'freelance': 'Freelances et travailleurs indépendants',
    'e-commerce': 'E-commerçants et vendeurs en ligne',
    'professions-liberales': 'Professions libérales',
    'mixte': 'Audience B2B mixte'
  };
  const themeLabels = {
    'facture-electronique': 'Facturation électronique',
    'fiscalite': 'Fiscalité et optimisation fiscale',
    'creation-entreprise': "Création d'entreprise",
    'tresorerie': 'Gestion de tresorerie',
    'social': 'Social, paie et RH',
    'outils-digitaux': 'Outils digitaux et automatisation',
    'pilotage': 'Pilotage et indicateurs de performance',
    'levee-fonds': 'Levee de fonds et relations investisseurs',
    'juridique': 'Aspects juridiques et droit des sociétés',
    'ia-comptabilite': 'Intelligence artificielle et comptabilité'
  };
  const toneLabels = {
    'professionnel': 'professionnel et expert, démontrant une maîtrise technique',
    'accessible': 'accessible et pédagogue, vulgarisant les concepts complexes',
    'percutant': 'percutant et direct, avec des phrases courtes et impactantes',
    'storytelling': 'narratif et engageant, racontant une histoire',
    'humoristique': 'légèrement humoristique tout en restant professionnel'
  };
  const lengthLabels = {
    'court': 'court (moins de 500 caractères)',
    'moyen': 'moyen (800-1 200 caractères)',
    'long': 'long (1 500-2 000 caractères)',
    'tres-long': "très long (jusqu'à 3 000 caractères)"
  };
  const ctaLabels = {
    'commentaire': 'une question ouverte authentique incitant aux commentaires (éviter l\'engagement bait du type "commentez OUI si...")',
    'rdv': "une proposition de RDV gratuit ou d'audit offert",
    'dm': 'une invitation à envoyer un message privé',
    'lien': 'un renvoi vers un lien (le lien peut être placé en fin de post)',
    'save': 'une incitation a sauvegarder le post pour référence ultérieure (signal d\'engagement le plus valorisé par l\'algorithme)',
    'aucun': 'pas de call-to-action explicite'
  };

  let prompt = `Tu es un expert en personal branding LinkedIn pour les professions du chiffre. Rédige un post LinkedIn pour un expert-comptable.

AUTEUR
- Nom : ${authorName}
- Titre LinkedIn (headline) : ${authorTitle}
- Cabinet : ${cabinetName}
Note : l'algorithme LinkedIn (360Brew) analyse la cohérence entre le profil de l'auteur et le contenu publié. Le post doit rester dans le champ d'expertise déclaré dans le titre.

OBJECTIF
Générer un ${postTypeLabels[postType]} destiné à attirer et engager une audience de ${targetLabels[targetAudience]}.

THÉMATIQUE
${themeLabels[theme]}`;

  if (specificTopic.trim()) {
    prompt += `

SUJET SPÉCIFIQUE À TRAITER
${specificTopic}`;
  }

  prompt += `

STYLE ET FORMAT
- Ton : ${toneLabels[tone]}
- Longueur : ${lengthLabels[postLength]}
- Call-to-action : ${ctaLabels[cta]}

STRUCTURE ATTENDUE
1. **Accroche (Hook)** — Les 2-3 premières lignes DOIVENT capter l'attention (avant le "...voir plus"). Utilise AU CHOIX :
   - une statistique UNIQUEMENT si elle est fournie dans "Données factuelles" ;
   - une question directe ;
   - un constat terrain sans chiffre.
   INTERDICTION ABSOLUE d'inventer des chiffres, dates, seuils ou références.

2. **Saut de ligne** — Après l'accroche, laisse un espace pour créer de l'aération.

3. **Corps du post** — Développe le contenu avec :
   - Des phrases courtes et percutantes
   - Des sauts de ligne fréquents (LinkedIn = format vertical mobile)
   - Des emojis utilisés avec parcimonie (1-2 par section max)
   - Si format listicle ou framework : structure le contenu pour qu'il soit « saveable » (digne d'être enregistré pour référence)

4. **Conclusion** — Le message clé à retenir en 1-2 phrases.

5. **Call-to-action** — ${ctaLabels[cta]}

CONTRAINTES LINKEDIN (actualisées 2026 — 360Brew)
- Le post doit faire moins de 3 000 caractères
- Les 2-3 premières lignes sont CRUCIALES (visibles avant le "voir plus")
- NE PAS utiliser de hashtags (impact nul à négatif depuis 2025, étude van der Blom)
- Inclure naturellement dans le texte les termes thématiques pertinents (l'algorithme scanne le contenu textuel, pas les hashtags)
- Éviter le jargon trop technique pour rester accessible
- Utiliser le "vous" pour s'adresser à l'audience
- NE PAS utiliser d'engagement bait ("commentez OUI si...", "likez si vous êtes d'accord") — détecté et pénalisé par l'algorithme
- Les liens peuvent être placés en fin de post (la pénalité sur les liens a été significativement réduite)
- Privilégier un contenu « saveable » : frameworks, checklists, guides pratiques que l'audience voudra enregistrer

BONNES PRATIQUES
- Commencer par une statistique UNIQUEMENT si fournie, sinon une question ou un constat terrain
- Utiliser des chiffres UNIQUEMENT s'ils sont fournis (sinon rester qualitatif)
- Terminer par une question ouverte authentique pour générer des commentaires
- Aérer le texte avec des sauts de ligne
- Éviter les blocs de texte compacts

DONNÉES FACTUELLES FOURNIES (à utiliser exclusivement)
${factsProvided && factsProvided.trim() ? factsProvided.trim() : "Aucune donnée factuelle fournie. Le post DOIT rester sans chiffres, sans dates, sans seuils et sans références juridiques précises. Formuler en termes qualitatifs uniquement."}

CONFORMITÉ / DÉONTOLOGIE (obligatoire — Décret n°2012-432)
- Art. 12 : Le post délivre une information générale et pédagogique — pas de conseil personnalisé public. Aucune information confidentielle. Si un cas est évoqué, il est strictement anonymisé.
- Art. 145 : Le contenu reste dans le champ de compétence de l'expert-comptable.
- Art. 152-155 : Communication loyale, décente, ne portant pas atteinte à la dignité de la profession. Aucune publicité comparative, aucune promesse de résultat, aucune critique nominative de confrères.
- Si un point dépend d'un texte officiel, d'un seuil ou d'une date : inviter à vérifier avec un professionnel.

Rédige maintenant le post LinkedIn complet.

Puis ajoute une section "RELECTURE INTERNE (ne pas publier)" avec cette checklist :
[ ] 1. Exactitude des faits : tous les éléments factuels sont-ils issus des données fournies ?
[ ] 2. Absence d'invention : aucun chiffre, date, seuil ou référence inventé ?
[ ] 3. Secret professionnel (art. 12) : aucune information identifiable ? Anonymisation complète ?
[ ] 4. Clarté et accessibilité : un non-spécialiste comprend-il le message ?
[ ] 5. Cohérence ton/CTA : le ton correspond-il à la cible ? Le CTA est-il naturel ?
[ ] 6. Lisibilité : texte aéré, phrases courtes, structure claire ?
[ ] 7. Conformité déontologique (art. 152-155) : communication loyale, aucune promesse, aucune comparaison ?
[ ] 8. Orthographe et grammaire : relecture finale effectuée ?`;

  document.getElementById('promptOutput').textContent = prompt;

  // Char count
  const counter = document.getElementById('promptCharCount');
  counter.textContent = prompt.length + ' caractères dans le prompt';

  // Save to history
  const historyEntry = {
    id: Date.now(),
    createdAt: new Date().toISOString(),
    type: postType,
    theme: theme,
    target: targetAudience,
    status: 'draft',
    prompt: prompt
  };
  appData.history.unshift(historyEntry);
  saveData();
  renderHistory();
  toast('Prompt généré avec succès');
}

// =====================================================
// TEMPLATES
// =====================================================
function loadTemplate(templateId) {
  const templates = {
    'accroche-choc': { type: 'expertise', theme: 'facture-electronique', tone: 'percutant', topic: "Accroche : utilisez une statistique UNIQUEMENT si elle est fournie et sourcée, sinon posez une question directe ou formulez un constat terrain (sans chiffre). Objectif : créer un contenu que l'audience voudra sauvegarder." },
    'erreur-courante': { type: 'conseil', theme: 'fiscalite', tone: 'accessible', topic: "Les X erreurs les plus courantes que je vois chez mes clients [cible]. Format liste avec solutions pratiques. Structure « saveable »." },
    'cas-client': { type: 'storytelling', theme: 'tresorerie', tone: 'storytelling', topic: "Raconter l'histoire d'un cas STRICTEMENT ANONYMISE (art. 12 code déontologie) : situation initiale, intervention, enseignements. Chiffres uniquement si fournis." },
    'actualite': { type: 'actualite', theme: 'facture-electronique', tone: 'professionnel', topic: "Décryptage d'une actualité récente (loi, réforme, décision) avec impact concret pour les entrepreneurs. Positionnement d'autorité thématique." },
    'checklist': { type: 'conseil', theme: 'creation-entreprise', tone: 'accessible', topic: "Checklist pratique de X points à vérifier. Format liste actionnable immédiatement. Contenu « saveable » par excellence." },
    'mythe-realite': { type: 'expertise', theme: 'fiscalite', tone: 'percutant', topic: 'Démystifier une idée reçue courante. Structure : "On dit que... En réalité…" avec explication factuelle.' },
    'question': { type: 'engagement', theme: 'outils-digitaux', tone: 'accessible', topic: "Poser une question ouverte AUTHENTIQUE qui génère du débat. Éviter l'engagement bait. Partager ensuite son point de vue." },
    'carrousel-guide': { type: 'carrousel', theme: 'pilotage', tone: 'accessible', topic: "Structure pour carrousel 8-10 slides MAX (taux de complétion) : Slide 1 (accroche), Slides 2-8 (contenu étape par étape), Slide finale (CTA + incitation save)." }
  };

  const t = templates[templateId];
  if (!t) return;

  document.querySelectorAll('.post-type-card').forEach(c => {
    c.classList.remove('selected');
    if (c.dataset.type === t.type) c.classList.add('selected');
  });
  document.querySelectorAll('input[name="theme"]').forEach(r => {
    r.checked = r.value === t.theme;
    r.closest('.theme-item').classList.toggle('selected', r.checked);
  });
  document.getElementById('tone').value = t.tone;
  document.getElementById('specificTopic').value = t.topic;

  showPanel('generator');
  document.querySelectorAll('.tab').forEach(tab => {
    tab.classList.remove('active');
    if (tab.textContent.includes('Générateur')) tab.classList.add('active');
  });
  toast('Modèle chargé');
}

// =====================================================
// CAS PRATIQUE
// =====================================================
function loadCasPratique() {
  document.getElementById('authorName').value = 'Monsieur X';
  document.getElementById('authorTitle').value = 'Expert-comptable | Cabinet 100% digital | Startups & PME innovantes';
  document.getElementById('cabinetName').value = 'Cabinet X Expertise';
  document.getElementById('targetAudience').value = 'startup';
  document.getElementById('specificTopic').value =
`Facturation électronique : comment se préparer de manière pragmatique (sans jargon) ?

Angle à développer :
- Clarifier ce que cela change concrètement (process, outils, organisation)
- Proposer 3 étapes simples de préparation (diagnostic, choix de solution, conduite du changement)
- Préciser que toute échéance, seuil ou obligation doit être confirmée à partir de sources officielles
- Contenu « saveable » : le lecteur doit vouloir enregistrer ce post pour y revenir plus tard`;
  document.getElementById('factsProvided').value = `Réception obligatoire des factures électroniques : 1er septembre 2026 (source : art. 91 LF 2024, Ministère de l'Économie).
Émission obligatoire PME/TPE/micro : 1er septembre 2027 (source : art. 91 LF 2024).
136 plateformes de dématérialisation partenaires (PA) immatriculées au 29 janvier 2026 (source : DGFiP).
73 % des entreprises expriment un besoin d'accompagnement structuré (source : CNOEC/OEC 2024-2025).`;

  if (appData.calendar.length === 0) {
    appData.calendar = [
      { date: '2026-02-04', time: '12:00', theme: 'Facturation électronique : les bases', status: 'scheduled', notes: 'Post pédagogique — données sourcées' },
      { date: '2026-02-11', time: '08:00', theme: 'IFU et dividendes : mode d\'emploi', status: 'scheduled', notes: 'Guide pratique' },
      { date: '2026-02-18', time: '12:00', theme: 'Erreurs comptables freelances', status: 'draft', notes: 'Listicle — contenu saveable' },
      { date: '2026-02-25', time: '12:00', theme: 'Cas anonymisé : trésorerie startup', status: 'draft', notes: 'Storytelling — art. 12' }
    ];
  }
  saveData();
  renderCalendar();
  renderHistory();
  updateStats();
  toast('Cas pratique chargé — données factuelles sourcées pré-remplies');
}

// =====================================================
// CALENDAR
// =====================================================
function renderCalendar() {
  const monthNames = ['Janvier','Février','Mars','Avril','Mai','Juin','Juillet','Aout','Septembre','Octobre','Novembre','Décembre'];
  document.getElementById('calendarTitle').textContent = monthNames[currentMonth] + ' ' + currentYear;

  const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
  const firstDay = new Date(currentYear, currentMonth, 1).getDay();
  const adjustedFirstDay = firstDay === 0 ? 6 : firstDay - 1;

  const today = new Date();
  const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;

  let html = ['Lun','Mar','Mer','Jeu','Ven','Sam','Dim'].map(d =>
    `<div class="calendar-day-header">${d}</div>`
  ).join('');

  for (let i = 0; i < adjustedFirstDay; i++) {
    html += '<div class="calendar-day" style="background:transparent;border:none;"></div>';
  }

  for (let day = 1; day <= daysInMonth; day++) {
    const dateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
    const hasPost = appData.calendar.some(p => p.date === dateStr);
    const isToday = dateStr === todayStr;
    const classes = ['calendar-day'];
    if (hasPost) classes.push('has-post');
    if (isToday) classes.push('today');

    html += `<div class="${classes.join(' ')}" onclick="selectDay('${dateStr}')">
      <div class="calendar-day-number">${day}</div>
      ${hasPost ? '<div class="calendar-day-indicator"></div>' : ''}
    </div>`;
  }

  document.getElementById('calendarGrid').innerHTML = html;
}

function prevMonth() {
  currentMonth--;
  if (currentMonth < 0) { currentMonth = 11; currentYear--; }
  renderCalendar(); updateStats();
}
function nextMonth() {
  currentMonth++;
  if (currentMonth > 11) { currentMonth = 0; currentYear++; }
  renderCalendar(); updateStats();
}

function selectDay(dateStr) {
  document.getElementById('postDate').value = dateStr;
  openModal('post');
}

function openPostModal() {
  document.getElementById('postDate').value = '';
  document.getElementById('postThemeModal').value = '';
  document.getElementById('postNotes').value = '';
  openModal('post');
}

function savePost() {
  const date = document.getElementById('postDate').value;
  const time = document.getElementById('postTime').value;
  const theme = document.getElementById('postThemeModal').value;
  const notes = document.getElementById('postNotes').value;
  if (!date || !theme) { toast('Date et thème requis'); return; }

  appData.calendar = appData.calendar.filter(p => p.date !== date);
  appData.calendar.push({ date, time, theme, status: 'scheduled', notes });
  saveData();
  renderCalendar();
  updateStats();
  closeModal('post');
  toast('Post planifié');
}

// =====================================================
// HISTORY
// =====================================================
function renderHistory() {
  const typeL = { expertise:'Expertise', actualite:'Actualité', conseil:'Conseil', storytelling:'Story', engagement:'Engagement', carrousel:'Carrousel' };
  const themeL = { 'facture-electronique':'Fact. Élec.', fiscalite:'Fiscalité', 'creation-entreprise':'Création', tresorerie:'Trésorerie', social:'Social', 'outils-digitaux':'Digital', pilotage:'Pilotage', 'levee-fonds':'Levée', juridique:'Juridique', 'ia-comptabilite':'IA' };
  const targetL = { startup:'Startups', tpe:'TPE', pme:'PME', freelance:'Freelances', 'e-commerce':'E-com', 'professions-liberales':'Prof. Lib.', mixte:'Mixte' };

  let html = '';
  appData.history.forEach(entry => {
    html += `<tr>
      <td>${formatDateTime(entry.createdAt)}</td>
      <td>${typeL[entry.type] || entry.type}</td>
      <td>${themeL[entry.theme] || entry.theme}</td>
      <td>${targetL[entry.target] || entry.target}</td>
      <td><span class="status-badge status-${entry.status}">${getStatusText(entry.status)}</span></td>
      <td>
        <button class="btn btn-sm btn-outline" onclick="viewPrompt(${entry.id})">Voir</button>
        <button class="btn btn-sm btn-outline" onclick="copyHistoryPrompt(${entry.id})">Copier</button>
        <button class="btn btn-sm btn-outline" onclick="deleteHistory(${entry.id})">Suppr.</button>
      </td>
    </tr>`;
  });
  if (!html) html = '<tr><td colspan="6" style="text-align:center;color:var(--gray-500);font-style:italic;">Aucun historique</td></tr>';
  document.getElementById('historyTableBody').innerHTML = html;
}

function viewPrompt(id) {
  const e = appData.history.find(h => h.id === id);
  if (!e) return;
  document.getElementById('promptOutput').textContent = e.prompt;
  showPanel('generator');
  document.querySelectorAll('.tab').forEach(t => { t.classList.remove('active'); if (t.textContent.includes('Générateur')) t.classList.add('active'); });
  toast('Prompt chargé');
}

function copyHistoryPrompt(id) {
  const e = appData.history.find(h => h.id === id);
  if (!e) return;
  navigator.clipboard.writeText(e.prompt).then(() => toast('Prompt copié'));
}

function deleteHistory(id) {
  if (!confirm('Supprimer cet historique ?')) return;
  appData.history = appData.history.filter(h => h.id !== id);
  saveData(); renderHistory();
  toast('Supprimé');
}

function clearHistory() {
  if (!confirm("Vider tout l'historique ?")) return;
  appData.history = [];
  saveData(); renderHistory();
  toast('Historique vidé');
}

// =====================================================
// STATS
// =====================================================
function updateStats() {
  const ms = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}`;
  document.getElementById('statPostsMonth').textContent = appData.calendar.filter(p => p.date.startsWith(ms)).length;
  document.getElementById('statPostsTotal').textContent = appData.calendar.length;
  document.getElementById('statPublished').textContent = appData.calendar.filter(p => p.status === 'published').length;
}

// =====================================================
// DATA PERSISTENCE
// =====================================================
function saveData() {
  try { localStorage.setItem(STORAGE_KEY, JSON.stringify(appData)); } catch(e) {}
}

function loadData() {
  try {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) appData = JSON.parse(saved);
  } catch(e) {}
}

function exportData() {
  const blob = new Blob([JSON.stringify({ exportDate: new Date().toISOString(), version: '3.0', tool: 'Annexe 12 - Générateur consignes LinkedIn', ...appData }, null, 2)], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `annexe12-linkedin-${new Date().toISOString().split('T')[0]}.json`;
  a.click();
  URL.revokeObjectURL(url);
  toast('JSON exporté');
}

function importData() { document.getElementById('importFile').click(); }

function handleImport(event) {
  const file = event.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = (e) => {
    try {
      const imported = JSON.parse(e.target.result);
      if (imported.history) appData.history = imported.history;
      if (imported.calendar) appData.calendar = imported.calendar;
      if (imported.settings) appData.settings = imported.settings;
      saveData(); renderHistory(); renderCalendar(); updateStats();
      toast('Données importées');
    } catch(err) { toast('Erreur d\'import'); }
  };
  reader.readAsText(file);
  event.target.value = '';
}

function resetData() {
  if (!confirm('Réinitialiser toutes les données ?')) return;
  appData = { history: [], calendar: [], settings: {} };
  localStorage.removeItem(STORAGE_KEY);
  renderHistory(); renderCalendar(); updateStats();
  toast('Réinitialisé');
}

// =====================================================
// PDF EXPORT
// =====================================================
// =====================================================
// UTILITIES
// =====================================================
function copyPrompt() {
  const p = document.getElementById('promptOutput').textContent;
  navigator.clipboard.writeText(p).then(() => toast('Prompt copié')).catch(() => toast('Erreur de copie'));
}

function openModal(name) { document.getElementById('modal-' + name).classList.add('show'); }
function closeModal(name) { document.getElementById('modal-' + name).classList.remove('show'); }

function toast(msg) {
  const el = document.getElementById('toast');
  el.textContent = msg; el.classList.add('show');
  setTimeout(() => el.classList.remove('show'), 2500);
}

function formatDateTime(dateStr) {
  if (!dateStr) return '—';
  const d = new Date(dateStr);
  return d.toLocaleDateString('fr-FR', { day:'2-digit', month:'short', year:'numeric', hour:'2-digit', minute:'2-digit' });
}

function getStatusText(status) {
  return { draft:'Brouillon', scheduled:'Planifié', published:'Publié' }[status] || status;
}
</script>
</body>
</html>
